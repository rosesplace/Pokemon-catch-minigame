# Twitch Pokémon Bot  

A Twitch chat game where wild Pokémon appear in chat, and viewers can catch them using different Poké Balls. The overlay shows animations for spawns, throws, and catches in OBS (or any streaming software that supports browser sources).  

---

## 📂 Folder Structure  

```
📁 assets/         → Sprites, balls, sounds  
📁 node_modules/   → Installed dependencies (auto-created by npm)  
📝 bot.js          → Main bot script  
📝 config.json     → Twitch credentials + settings  
📝 overlay.html    → Overlay for OBS/browser source  
📝 package.json    → Node.js project file (dependencies & scripts)  
📝 package-lock.json → Auto-generated by npm  
📝 pokedex.json    → Saved Pokédex (auto-generated, do not delete if you want to keep progress)  
📝 pokemon.json    → Full Pokémon dataset (all Pokémon with ID + sprite)  
▶️ start.bat       → Launches the bot  
```

---

## ⚙️ Setup  

1. **Install Node.js**  
   Download and install [Node.js](https://nodejs.org/) (LTS version recommended).  

2. **Configure your bot**  
   Open `config.json` and fill in your details:  
   ```json
   {
     "botUsername": "YourBotName",
     "oauthToken": "oauth:xxxxxxxxxxxxxxxxxxxxxx",
     "channel": "yourchannelname",
     "prefix": "!"
   }
   ```  
   - `botUsername`: The Twitch account your bot will log in as.  
   - `oauthToken`: Generate one at https://twitchapps.com/tmi/  
   - `channel`: Your Twitch channel name (lowercase).  
   - `prefix`: Command prefix (default is `!`).  

---

## ▶️ Starting the Bot  

- Simply double-click **`start.bat`**  
- Or run manually from terminal:  
  ```sh
  node bot.js
  ```

---

## 🎮 Chat Commands  

### For Moderators / Broadcaster  
- `!pokemon` → Spawn a random Pokémon  
- `!pokemon <id|name>` → Spawn a specific Pokémon by ID or name  
- `!pokestop` → Force the current Pokémon to flee  

### For Viewers  
- `!catch` → Throw a Poké Ball (everyone can use)  
- `!catch greatball` → Requires **Tier 1 sub**  
- `!catch ultraball` → Requires **Tier 2 sub**  
- `!catch masterball` → Requires **Tier 3 sub**  
- `!pokedex` → Shows your caught Pokémon  

---

## 🎥 Adding Overlay to OBS  

1. Open OBS (or any streaming software).  
2. Add a **Browser Source**.  
3. Set the URL to your overlay file:  
   ```
   file://C:/(your path)/Pokemon/overlay.html
   ```
   *(Replace with your actual bot folder path.)*  
4. Set width/height (e.g. 1920x1080) to match your stream canvas.  
5. Place the overlay where you want Pokémon to appear.  

---

## 💾 Saving Progress  

- Catches are stored in **`pokedex.json`**.  
- Don’t delete this file unless you want to reset everyone’s Pokédex.  

---

## 🛠️ Troubleshooting  

### 1. `Error: Login authentication failed`  
- Your `oauthToken` is wrong or expired.  
- Generate a new one at: https://twitchapps.com/tmi/  
- Update it in `config.json`.  

### 2. `Error loading pokedex.json: Unexpected end of JSON input`  
- This happens if `pokedex.json` is empty or corrupted.  
- Fix: Delete `pokedex.json` (a new one will be created automatically).  

### 3. Overlay not showing Pokémon in OBS  
- Make sure **`overlay.html`** path is correct in OBS (use `file://...`).  
- Ensure the **WebSocket server is running** (`✅ WebSocket overlay server running on ws://localhost:8080`).  
- Some browsers block local audio autoplay → test in OBS directly.  

### 4. Pokémon not spawning  
- Only **moderators or the broadcaster** can use `!pokemon`.  
- Check if the bot is connected in your Twitch chat (`[bot] has joined`).  

### 5. Audio not playing in overlay  
- Some audio files may be blocked by browser security.  
- In OBS, audio should play fine, but check your **audio routing/mixer**.  

---

✨ That’s it! You’re ready to let your viewers catch Pokémon on stream.  
